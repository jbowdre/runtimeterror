{{ $pages := .Pages }}
{{ if .IsHome }}
  {{ $pages = where site.RegularPages "Type" "in" site.Params.mainSections }}
{{ end }}
<header class="content__header">
{{ if .IsHome }}
  <h1>{{ site.Params.indexTitle | markdownify }}</h1>
{{ else }}
  <h1>{{ .Title | markdownify }}</h1>
{{ end }}
  {{ .Content }}
</header>

{{ range $pages }}
{{- $postDate := .Date.Format "2006-01-02" }}
{{- $updateDate := .Lastmod.Format "2006-01-02" }}
<article class="post">
  <header class="post__header">
      <h1><a href="{{ .Permalink }}">{{ .Title | markdownify }}</a></h1>
      <p class="post__meta">
          <span class="date"><i class="fa-regular fa-note-sticky"></i>&nbsp;{{ $postDate }}{{- if ne $postDate $updateDate }} &nbsp; <i class="fa-regular fa-pen-to-square"></i>&nbsp;{{ $updateDate }}{{ end }}</span>
      </p>
  </header>

  <section class="post__summary">
      {{ .Summary }}
  </section>
  <br>
</article>
{{ end }}